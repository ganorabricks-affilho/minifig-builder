# LEGO Minifigure Builder

Build complete LEGO minifigures from your parts inventory! This tool reads Bricklink XML files (exported from BrickStore) and suggests what complete minifigures can be assembled, prioritized by their estimated value based on Bricklink 6-month sale averages.

## Features

- üì¶ **Parse Bricklink XML** - Reads inventory files generated by BrickStore
- üîß **Intelligent Matching** - Identifies complete minifigures from available parts (head, torso, legs, headgear)
- üí∞ **Value-Based Prioritization** - Sorts suggestions by estimated value using 6-month Bricklink sale averages
- üìä **Multiple Output Formats** - Console display and JSON export
- ‚öôÔ∏è **Configurable** - Control how many results to show

## Installation

1. Clone this repository:
```bash
git clone https://github.com/ganorabricks-affilho/minifig-builder.git
cd minifig-builder
```

2. Install dependencies:
```bash
pip install -r requirements.txt
```

## Usage

### Basic Usage

Run the builder with your Bricklink XML inventory file:

```bash
python -m minifig_builder examples/sample_inventory.xml
```

### With Value Data

To prioritize minifigures by value, provide a JSON file with part values:

```bash
python -m minifig_builder examples/sample_inventory.xml --values examples/sample_values.json
```

### Limit Results

Show only the top N most valuable minifigures:

```bash
python -m minifig_builder examples/sample_inventory.xml --values examples/sample_values.json --max 5
```

### Export to JSON

Save results to a JSON file for further processing:

```bash
python -m minifig_builder examples/sample_inventory.xml --output results.json
```

## Input File Format

### Bricklink XML Format

The tool expects XML files in the Bricklink format (as exported by BrickStore):

```xml
<?xml version="1.0" encoding="UTF-8"?>
<INVENTORY>
  <ITEM>
    <ITEMTYPE>P</ITEMTYPE>
    <ITEMID>3626bpb0001</ITEMID>
    <COLOR>3</COLOR>
    <MINQTY>1</MINQTY>
    <CATEGORY>Minifigure, Head</CATEGORY>
    <ITEMNAME>Minifigure, Head Standard Grin</ITEMNAME>
  </ITEM>
  <!-- More items... -->
</INVENTORY>
```

### Value Data Format

The value data file should be a JSON object mapping part IDs to their 6-month average prices:

```json
{
  "3626bpb0001": 0.50,
  "973pb0001": 0.80,
  "970c00": 0.60
}
```

## How It Works

1. **Parse XML**: Reads your Bricklink XML inventory file
2. **Categorize Parts**: Identifies heads, torsos, legs, headgear, and accessories
3. **Match Combinations**: Finds all valid minifigure combinations from available parts
4. **Calculate Value**: Computes estimated value for each minifigure using provided price data
5. **Sort & Display**: Shows results sorted by value (highest first)

## Minifigure Requirements

A complete minifigure requires:
- ‚úÖ Head (required)
- ‚úÖ Torso (required)  
- ‚úÖ Legs (required)
- ‚≠ê Headgear/Hair (optional but included when available)
- ‚≠ê Accessories (optional)

## Examples

See the `examples/` directory for sample files:
- `sample_inventory.xml` - Example Bricklink XML with minifig parts
- `sample_values.json` - Example value data

## Command-Line Options

```
python -m minifig_builder [-h] [--values VALUES] [--max MAX] [--output OUTPUT] input_file

positional arguments:
  input_file            Path to Bricklink XML inventory file

options:
  -h, --help            Show help message
  --values VALUES, -v VALUES
                        Path to JSON file with part values (6-month averages)
  --max MAX, -m MAX     Maximum number of minifigures to display
  --output OUTPUT, -o OUTPUT
                        Output file for results (JSON format)
```

## Contributing

Contributions are welcome! Please feel free to submit issues or pull requests.

## License

This project is provided as-is for personal use.
